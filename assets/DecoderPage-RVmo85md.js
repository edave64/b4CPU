import{Q as D}from"./QPage-0F66hOZH.js";import{a as t,u as h}from"./cpu-DPxaCout.js";import{d as R,c as x,Q as b,R as v,a1 as d,V as e,Y as r,$ as o,F as c,U as u,a0 as S,X as M}from"./index-CtT7OCbn.js";import"./render-Dq9iI923.js";const W=new Set(["JN","JZ","JO","RR","RW","AR","AW","BR","BW","ALU1","ALU2"]),_=["value"],B=["checked","onInput"],F=["checked"],L=R({__name:"DecoderPage",setup(A){const i=x(()=>h().cpu.decoderState),m=W,g={Fetch:t.Fetch,Decode:t.Decode,Read:t.Read,Execute:t.Execute,Write:t.Write};function y(p,l,n){const s=i.value,a=new Set(s.instructions[p].gates);n?a.add(l):a.delete(l);const w={timingMasks:{[t.Fetch]:new Set(s.timingMasks[t.Fetch]),[t.Decode]:new Set(s.timingMasks[t.Decode]),[t.Read]:new Set(s.timingMasks[t.Read]),[t.Execute]:new Set(s.timingMasks[t.Execute]),[t.Write]:new Set(s.timingMasks[t.Write])},instructions:s.instructions.map((k,f)=>f===p?{name:k.name,gates:new Set(a)}:{name:k.name,gates:new Set(k.gates)})};h().cpu=M(h().cpu.withNewDecoder(w))}return(p,l)=>(u(),b(d(D),{padding:""},{default:v(()=>[e("div",null,[l[2]||(l[2]=e("h2",null,"Decoder",-1)),e("table",null,[e("thead",null,[e("tr",null,[l[0]||(l[0]=e("th",null,"Instruction",-1)),(u(!0),r(c,null,o(d(m),n=>(u(),r("th",{key:n},S(n),1))),128))])]),e("tbody",null,[(u(),r(c,null,o(16,n=>e("tr",{key:n},[e("td",null,[e("input",{type:"text",readonly:"",value:i.value.instructions[n-1].name},null,8,_)]),(u(!0),r(c,null,o(d(m),s=>(u(),r("td",{key:s},[e("input",{type:"checkbox",readonly:"",checked:i.value.instructions[n-1].gates.has(s),onInput:a=>y(n-1,s,a.target.checked)},null,40,B)]))),128))])),64))])]),l[3]||(l[3]=e("br",null,null,-1)),e("table",null,[e("thead",null,[e("tr",null,[l[1]||(l[1]=e("th",null,"Timing mask",-1)),(u(!0),r(c,null,o(d(m),n=>(u(),r("th",{key:n},S(n),1))),128))])]),e("tbody",null,[(u(),r(c,null,o(g,(n,s)=>e("tr",{key:s},[e("td",null,S(s),1),(u(!0),r(c,null,o(d(m),a=>(u(),r("td",{key:a},[e("input",{type:"checkbox",readonly:"",checked:i.value.timingMasks[n].has(a)},null,8,F)]))),128))])),64))])])])]),_:1}))}});export{L as default};
